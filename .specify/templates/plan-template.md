# Implementation Plan: [FEATURE]

**Branch**: `[###-feature-name]` | **Date**: [DATE] | **Spec**: [link]
**Input**: Feature specification from `/specs/[###-feature-name]/spec.md`

**Note**: This template is filled in by the `/speckit.plan` command. See `.specify/templates/commands/plan.md` for the execution workflow.

## Summary

[Extract from feature spec: primary requirement + technical approach from research]

## Technical Context

<!--
  ACTION REQUIRED: Replace the content in this section with the technical details
  for the project. The structure here is presented in advisory capacity to guide
  the iteration process.
-->

**Language/Version**: [e.g., Python 3.11, Swift 5.9, Rust 1.75 or NEEDS CLARIFICATION]  
**Primary Dependencies**: [e.g., FastAPI, UIKit, LLVM or NEEDS CLARIFICATION]  
**Storage**: [if applicable, e.g., PostgreSQL, CoreData, files or N/A]  
**Testing**: [e.g., pytest, XCTest, cargo test or NEEDS CLARIFICATION]  
**Target Platform**: [e.g., Linux server, iOS 15+, WASM or NEEDS CLARIFICATION]
**Project Type**: [single/web/mobile - determines source structure]  
**Performance Goals**: [domain-specific, e.g., 1000 req/s, 10k lines/sec, 60 fps or NEEDS CLARIFICATION]  
**Constraints**: [domain-specific, e.g., <200ms p95, <100MB memory, offline-capable or NEEDS CLARIFICATION]  
**Scale/Scope**: [domain-specific, e.g., 10k users, 1M LOC, 50 screens or NEEDS CLARIFICATION]

## Constitution Check

*GATE: Must pass before Phase 0 research. Re-check after Phase 1 design.*

[Gates determined based on constitution file]

## Project Structure

### Documentation (this feature)

```text
specs/[###-feature]/
├── plan.md              # This file (/speckit.plan command output)
├── research.md          # Phase 0 output (/speckit.plan command)
├── data-model.md        # Phase 1 output (/speckit.plan command)
├── quickstart.md        # Phase 1 output (/speckit.plan command)
├── contracts/           # Phase 1 output (/speckit.plan command)
└── tasks.md             # Phase 2 output (/speckit.tasks command - NOT created by /speckit.plan)
```

# Implementation Plan: [FEATURE]

**Branch**: `[###-feature-name]` | **Date**: [DATE] | **Spec**: [link]
**Input**: Feature specification from `specs/[###-feature-name]/spec.md`

This template is filled automatically by the `/speckit.plan` command.
Adapted for Unity 2D, C# (Unity runtime), MCP for Unity, and Copilot workflow.

## Summary

[Extract automatically from the feature spec: primary requirement, how it interacts with the Real/Shadow world mechanic, and a high-level technical outline.]

## Technical Context

**Language/Version**: C# 8+ (Unity runtime compiler)
**Primary Dependencies**:

- Unity 2022+
- URP 2D
- Cinemachine
- Unity Input System
- ScriptableObjects configuration
- MCP for Unity (Copilot / agent integration)

**Storage**: N/A (local runtime objects only)
**Testing**: Unity Test Framework (PlayMode + EditMode)
**Target Platform**: PC (Windows/Mac), 1080p baseline
**Project Type**: Unity single-project structure
**Performance Goals**: Stable 60 FPS, <1ms world-switch operations
**Constraints**:

- Deterministic behavior required
- All objects must support Real/Shadow switching
- No heavy `Update()` loops; logic must be event-driven

**Scale/Scope**:

- Lightweight script surface (30–40 scripts)
- 10+ levels
- Global mechanic controlled by `ShadowWorldManager`

## Constitution Check

Must pass before Phase 0 research. Failures block implementation.

- Mechanic-First Design ✔
- Minimalism & Clarity ✔
- Single Toggle Source of Truth ✔
- Deterministic Behavior ✔
- Prototype-First (NON-NEGOTIABLE) ✔

If the feature design violates any rule above, implementation is blocked and must be revised.

## Project Structure (Feature Scope)

### Documentation (this feature)

```text
specs/[###-feature]/
├── plan.md               # /speckit.plan output (this file)
├── research.md           # Phase 0 research
├── data-model.md         # Phase 1 data definitions
├── quickstart.md         # How to use or test this feature
├── contracts/            # Events, interfaces, expected behavior
└── tasks.md              # Generated by /speckit.tasks (not by plan)
```

### Source Code (Unity Project)

```text
Assets/
  Scripts/
    Core/
      ShadowWorldManager.cs
      GameEvents.cs
      SceneController.cs

    World/
      [FeatureName]/               # NEW for this feature
        [MainScript].cs
        [HelperScript].cs

    Player/
      PlayerController.cs
      PlayerMovement.cs

  Prefabs/
    [FeatureName]/
      [Prefab].prefab

  ScriptableObjects/
    [FeatureName]Config.asset

  Tests/
    EditMode/
      [FeatureName]Tests.cs
    PlayMode/
      [FeatureName]PlayTests.cs
```

**Structure Decision**: Unity single-project layout is used. Each new feature creates its own folder under `Assets/Scripts/World/[FeatureName]` and `Assets/Prefabs/[FeatureName]` to isolate logic and reduce coupling.

## Complexity Tracking

Fill ONLY if Constitution rules are intentionally broken.

| Violation | Why Needed | Simpler Alternative Rejected Because |
|-----------|------------|-------------------------------------|
| N/A | Feature follows all principles | N/A |

---

Generated for: Shadow Swap project
